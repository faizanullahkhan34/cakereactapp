{"ast":null,"code":"var _jsxFileName = \"/home/faizan/Desktop/my-apps-folder/new-react-app/src/components/signIn.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component } from 'react';\nimport FormErrors from './formErrors';\nimport \"../css/styles.css\";\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { loginMiddleware } from '../reduxstore/middlewares';\nimport Loader from \"react-loader-spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SignIn(props) {\n  _s();\n\n  const [state, setDefaultState] = React.useState({\n    email: \"\",\n    password: \"\",\n    formErrors: {\n      password: '',\n      email: ''\n    },\n    emailValid: false,\n    passwordValid: false,\n    formValid: false,\n    formSubmit: false,\n    formMessage: ''\n  });\n\n  const handleInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    state[name] = value;\n    setDefaultState({ ...state\n    });\n    validateField(e.target.name, e.target.value);\n  };\n\n  const handleInputSubmit = e => {\n    e.preventDefault();\n    let message = \"\"; //console.log(this.state)\n    //commented SNT 10062021 used thunk insted of normal dispatch\n    //   let  apiurl =process.env.REACT_APP_BASE_URI+\"login\";\n    //   axios({method:\"post\",url:apiurl,data:{\n    //     email:state.email,\n    //     password:state.password\n    //   }}).then((res)=>{\n    //         message= \"Success\";\n    //        // console.log(res)\n    //         localStorage.setItem('token',res.data.token);\n    //         props.dispatch({\n    //             type:'LOGIN',\n    //             payload:{\n    //               token:res.data.token,\n    //               isLogedIn:true\n    //             }\n    //         });\n    //         setTimeout(function(){ \n    //           props.history.push('/')\n    //         }, 1000);\n    // } ,(error)=>{\n    //          message = error;\n    // })\n\n    props.dispatch(loginMiddleware(state));\n    setDefaultState({ ...state,\n      email: \"\",\n      password: \"\",\n      formSubmit: true,\n      formMessage: message\n    });\n  }; //called when user is loged in\n\n\n  React.useEffect(() => {\n    if (props.isLogedIn === true) {\n      setTimeout(function () {\n        props.history.push('/');\n      }, 1000);\n    }\n  }, [props.isLogedIn]);\n\n  const validateField = (fieldName, value) => {\n    let fieldValidationErrors = state.formErrors;\n    let emailValid = state.emailValid;\n    let passwordValid = state.passwordValid;\n\n    switch (fieldName) {\n      case 'email':\n        emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n        fieldValidationErrors.email = emailValid ? '' : ' Enter Valid Email';\n        break;\n\n      case 'password':\n        passwordValid = value.length > 0;\n        fieldValidationErrors.password = passwordValid ? '' : 'Please Enter password';\n        break;\n\n      default:\n        break;\n    }\n\n    setDefaultState({ ...state,\n      formErrors: fieldValidationErrors,\n      emailValid: emailValid,\n      passwordValid: passwordValid,\n      formValid: emailValid && passwordValid\n    });\n  }; //  {console.log(\"final state\",state)}\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [props.isLoading && /*#__PURE__*/_jsxDEV(\"center\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Bars\",\n        color: \"#00BFFF\",\n        height: 80,\n        width: 80\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 42\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"form\",\n      className: \"form\",\n      onSubmit: handleInputSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          onChange: handleInputChange,\n          value: state.email,\n          type: \"text\",\n          id: \"email\",\n          placeholder: \"Enter email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: state.formErrors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"passowrd\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          onChange: handleInputChange,\n          value: state.password,\n          type: \"password\",\n          id: \"password\",\n          placeholder: \"Enter password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: state.formErrors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }, this), state.formValid ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        disabled: !state.formValid,\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 32\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"Disabled\",\n        disabled: !state.formValid,\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 13\n  }, this);\n}\n\n_s(SignIn, \"l9orXInaQO9ehLLG21/6G1F+aOM=\");\n\n_c = SignIn;\nSignIn = withRouter(SignIn);\n\nfunction mapStateToProps(state, props) {\n  // alert('props are',props)\n  return {\n    isLogedIn: state.AuthReducer.isLogedIn,\n    isLoading: state.AuthReducer.isLoading\n  };\n}\n\n;\nexport default connect(mapStateToProps)(SignIn);\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/home/faizan/Desktop/my-apps-folder/new-react-app/src/components/signIn.js"],"names":["React","Component","FormErrors","axios","withRouter","connect","loginMiddleware","Loader","SignIn","props","state","setDefaultState","useState","email","password","formErrors","emailValid","passwordValid","formValid","formSubmit","formMessage","handleInputChange","e","name","target","value","validateField","handleInputSubmit","preventDefault","message","dispatch","useEffect","isLogedIn","setTimeout","history","push","fieldName","fieldValidationErrors","match","length","isLoading","mapStateToProps","AuthReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FormErrors from './formErrors';\nimport \"../css/styles.css\";\nimport axios from 'axios';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport{loginMiddleware} from '../reduxstore/middlewares';\nimport Loader from \"react-loader-spinner\";\n\n\nfunction SignIn(props) {\n      const[state,setDefaultState]=React.useState({\n        email:\"\",\n        password:\"\",\n        formErrors: {password: '', email: ''},\n        emailValid: false,\n        passwordValid: false,\n        formValid: false,\n        formSubmit:false,\n        formMessage:''\n   });\n\n   \n\n     const handleInputChange=(e)=>{\n          const name = e.target.name;\n          const value = e.target.value;\n          state[name] = value;\n          setDefaultState({ ...state });\n          validateField(e.target.name, e.target.value);\n      }\n\n     const  handleInputSubmit=(e)=>{\n          e.preventDefault();\n          let message =\"\";\n          //console.log(this.state)\n        \n        //commented SNT 10062021 used thunk insted of normal dispatch\n        //   let  apiurl =process.env.REACT_APP_BASE_URI+\"login\";\n\n        //   axios({method:\"post\",url:apiurl,data:{\n        //     email:state.email,\n        //     password:state.password\n        //   }}).then((res)=>{\n        //         message= \"Success\";\n        //        // console.log(res)\n        //         localStorage.setItem('token',res.data.token);\n        //         props.dispatch({\n        //             type:'LOGIN',\n        //             payload:{\n        //               token:res.data.token,\n        //               isLogedIn:true\n        //             }\n        //         });\n\n        //         setTimeout(function(){ \n        //           props.history.push('/')\n        //         }, 1000);\n        // } ,(error)=>{\n        //          message = error;\n        // })\n      \n        props.dispatch(loginMiddleware(state));\n        setDefaultState({...state,\n          email:\"\",\n          password:\"\", \n          formSubmit:true,\n          formMessage:message\n        }); \n      };\n\n      //called when user is loged in\n      React.useEffect(() => {\n        if(props.isLogedIn === true){\n          setTimeout(function(){ \n            props.history.push('/')\n          }, 1000);\n        }\n \n       }, [props.isLogedIn ]);\n\n      const validateField=(fieldName, value)=> {\n          \n        let fieldValidationErrors = state.formErrors;\n        let emailValid = state.emailValid;\n        let passwordValid = state.passwordValid;\n      \n        switch(fieldName) {\n          case 'email':\n            emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n            fieldValidationErrors.email = emailValid ? '' : ' Enter Valid Email';\n            break;\n          case 'password':\n            passwordValid = value.length >0;\n            fieldValidationErrors.password = passwordValid ? '': 'Please Enter password';\n            break;\n          default:\n            break;\n        }\n        setDefaultState({...state,formErrors: fieldValidationErrors,\n                        emailValid: emailValid,\n                        passwordValid: passwordValid,\n                        formValid: emailValid && passwordValid\n                      });\n      }\n      \n        //  {console.log(\"final state\",state)}\n        return (\n            <div className=\"container\">\n              {/* {state.formValid==true||state.formSubmit==true?<div class=\"alert alert-danger\" role=\"alert\">\n                 {state.formSubmit===true?state.formMessage:null}\n                 {state.formValid?\"Form is Valid Please Login\":null}\n              </div>:null} */}\n              \n            {props.isLoading && <center> <Loader type=\"Bars\" color=\"#00BFFF\" height={80} width={80} /></center>}\n            <form id=\"form\" className=\"form\" onSubmit={handleInputSubmit}>\n              <h2>Sign In</h2>\n             \n              <div className=\"form-controls\">\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  name=\"email\"\n                  onChange={handleInputChange}\n                  value={state.email}\n                  type=\"text\"\n                  id=\"email\"\n                  placeholder=\"Enter email\"\n                />\n                <div className=\"errors\">{state.formErrors.email}</div>\n              </div>\n              <div className=\"form-controls\">\n                <label htmlFor=\"passowrd\">Password</label>\n                <input\n                  name=\"password\"\n                  onChange={handleInputChange}\n                  value={state.password}\n                  type=\"password\"\n                  id=\"password\"\n                  placeholder=\"Enter password\"\n                />\n                 <div className=\"errors\">{state.formErrors.password}</div>\n              </div>\n             \n              {state.formValid?<button className=\"button\" disabled={!state.formValid}> Login </button>:\n                  <button className=\"Disabled\" disabled={!state.formValid}> Login </button>\n              }\n              {/* <p>{state.formValid?\"Form is Valid\":null}</p>\n            \n                <div className=\"panel panel-default\">\n                <FormErrors formErrors={state.formErrors} />\n                </div>\n              {state.formSubmit===true?state.formMessage:null} */}\n            </form>\n          </div>\n        )\n}\n\nSignIn = withRouter(SignIn);\n\nfunction mapStateToProps(state,props){\n\n // alert('props are',props)\n  return{\n    isLogedIn:state.AuthReducer.isLogedIn,\n    isLoading:state.AuthReducer.isLoading\n  }\n};\n\nexport default connect(mapStateToProps)(SignIn);\n"]},"metadata":{},"sourceType":"module"}